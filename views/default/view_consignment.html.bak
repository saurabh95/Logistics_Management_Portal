{{include 'web2py_ajax.html'}}
<script src="{{=URL('static','js/bootstrap.min.js')}}"></script>
  <script src="{{=URL('static','js/web2py_bootstrap.js')}}"></script>
<head>
<link rel="stylesheet" href="../static/css/bootstrap.css" type="text/css" media="all" />
<noscript><link href="{{=URL('static', 'css/web2py_bootstrap_nojs.css')}}" rel="stylesheet" type="text/css" /></noscript>
  <!-- All JavaScript at the bottom, except for Modernizr which enables
       HTML5 elements & feature detects -->
 
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>Logistics</title>
<link rel="stylesheet" href="../static/css/style.css" type="text/css" media="all" />
    <script src="../static/js/jquery-1.4.1.min.js" type="text/javascript"></script>
    <script src="../static/js/jquery.jcarousel.pack.js" type="text/javascript"></script>
    <script src="../static/js/jquery-func.js" type="text/javascript"></script>


  

{{import json}}
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>

<!-- this is autocomplete-->
<!--link rel="stylesheet" href="{{=URL('static/chosen','docsupport/style.css')}}">
<link rel="stylesheet" href="{{=URL('static/chosen','docsupport/prism.css')}}"-->
<link rel="stylesheet" href="{{=URL('static/chosen','chosen.css')}}">
<style type="text/css" media="all">
/* fix rtl for demo */
.chosen-rtl .chosen-drop { left: -9000px; }
</style>
<!-- this is autocomplete-->
    
    
</head>
<body>
<div id="page" class="shell">
    <!-- Logo + Search + Navigation -->
    <div id="top">
        <div class="cl">&nbsp;</div>
        <h1 id="logo"><a href="#"></a></h1>
        <!--form action="" method="post" id="search">
            <div class="field-holder">
                <input type="text" class="field" value="Search" title="Search" />
            </div>
            <input type="submit" class="button" value="Search" />
            <div class="cl">&nbsp;</div>
        </form-->
        <div class="cl">&nbsp;</div>
        <div id="navigation">
            <ul>
                <li>
                    <a href="{{=URL('default','index')}}"><span>home</span></a>
                </li>
                <li>
                    <a href="{{=URL('default','about_us')}}"><span>About us</span></a>
                </li>
                <li>
                        <li><a href="{{=URL('default','place_order')}}"><span>Place Order</span></a></li>
                        
                        
                </li>
                <li>
                    <a href="{{=URL('default','estimate_cost')}}"><span>Estimate Cost</span></a>
                </li>
                <li><a href="{{=URL('default','view_consignment')}}"   class="active"><span>View/Track Consignments</span></a></li>
                <li>
                    <a href="{{=URL('default','contact')}}"><span>contact</span></a>
                </li>
            </ul>
        </div>  
    </div>
    <!-- END Logo + Search + Navigation -->
    <!-- Header -->
    <div id="header">
    </div>
    <!-- END Header -->
    <div id="main">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="http://rawgithub.com/joequery/Stupid-Table-Plugin/master/stupidtable.js?dev"></script>
    <script>
    $(function(){
        $("table").stupidtable();
    });
        function get_id(val) {
            //  document.write(val);
            var cancel_link="cancel_consignment?cancel_id="+val;
            //  var cancel_link="\"\{\{=URL('default','cancel_consignment?cancel_id=";
            //  cancel_link=cancel_link+val+"')}}\"";
            document.getElementById('redirect_button').href=cancel_link;
        }
  </script>
</head>

<style type="text/css">
.datagrid table { border-collapse: collapse; text-align: left; width: 70%; margin-left: auto;
    margin-right: auto; } .datagrid {font: normal 12px/150% Geneva, Arial, Helvetica, sans-serif; background: #fff; overflow: hidden; -webkit-border-radius: 6px; -moz-border-radius: 6px; border-radius: 6px; }.datagrid table td, .datagrid table th { padding: 11px 10px; }.datagrid table thead th {background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #006699), color-stop(1, #00557F) );background:-moz-linear-gradient( center top, #006699 5%, #00557F 100% );filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#006699', endColorstr='#00557F');background-color:#006699; color:#FFFFFF; font-size: 16px; font-weight: bold; border-left: 0px solid #0070A8; } .datagrid table thead th:first-child { border: none; }.datagrid table tbody td { color: #00496B; font-size: 14px;font-weight: bold; }.datagrid table tbody .alt td { background: #E1EEF4; color: #00496B; }.datagrid table tbody td:first-child { border-left: none; }.datagrid table tbody tr:last-child td { border-bottom: none; }.datagrid table tfoot td div { border-top: 1px solid #006699;background: #E1EEF4;} .datagrid table tfoot td { padding: 0; font-size: 12px } .datagrid table tfoot td div{ padding: 2px; }.datagrid table tfoot td ul { margin: 0; padding:0; list-style: none; text-align: right; }.datagrid table tfoot  li { display: inline; }.datagrid table tfoot li a { text-decoration: none; display: inline-block;  padding: 2px 8px; margin: 1px;color: #FFFFFF;border: 1px solid #006699;-webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #006699), color-stop(1, #00557F) );background:-moz-linear-gradient( center top, #006699 5%, #00557F 100% );filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#006699', endColorstr='#00557F');background-color:#006699; }.datagrid table tfoot ul.active, .datagrid table tfoot ul a:hover { text-decoration: none;border-color: #006699; color: #FFFFFF; background: none; background-color:#00557F;}

</style>


<!--div class="datagrid">
    <table>
        <thead><tr><th>header</th><th>header</th><th>header</th><th>header</th></tr></thead>
        <tfoot><tr><td colspan="4">
            <tbody>
                <tr><td>data</td><td>data</td><td>data</td><td>data</td></tr>
                <tr class="alt"><td>data</td><td>data</td><td>data</td><td>data</td></tr>
                <tr><td>data</td><td>data</td><td>data</td><td>data</td></tr>
                <tr class="alt"><td>data</td><td>data</td><td>data</td><td>data</td></tr>
                <tr><td>data</td><td>data</td><td>data</td><td>data</td></tr>
            </tbody>
            </td>
            </tr>
</table></div-->

<div class="datagrid">
<table>
     <thead>
         <tr>
             <th data-sort="int">Id</th>
             <th data-sort="string">Source</th>
             <th data-sort="string">Destination</th>
             <th data-sort="string">Type</th>
             <th>Options</th>
         </tr>
    </thead>
    <tbody>
    {{ctr=0}}
	{{for i in a:}}
    {{ctr+=1}}
    {{if(ctr%2==0):}}
	<tr>
        {{st=""}}
        {{st=str(i.id)}}
        {{st='track_consignment?consignment_id='+st}}
        <td> {{=i.id}}</td>
		{{l=db(db.Location1.id==i.location_id).select()}}
		<td>{{=l[0].Source_City}}</td>
		<td>{{=l[0].Destination_City}}</td>
		<td>{{=i.Logistic_Type}}</td>
        {{if(i.Current_location==None):}}
        <td><button id="{{=i.id}}" value="{{=i.id}}" class="btn btn-danger btn-lg" data-toggle="modal" data-target="#myModal" onclick="get_id(this.value)">Cancel</button></td>
        {{else:}}
        <td><a href="{{=URL(st)}}"><button type="button" class="btn btn-danger">Track</button></a></td>
       {{pass}}
        </tr>
    {{else:}}
    <tr class="alt">
        {{st=""}}
        {{st=str(i.id)}}
        {{st='track_consignment?consignment_id='+st}}
        <td>{{=i.id}}</td>
		{{l=db(db.Location1.id==i.location_id).select()}}
		<td>{{=l[0].Source_City}}</td>
		<td>{{=l[0].Destination_City}}</td>
		<td>{{=i.Logistic_Type}}</td>
        {{if(i.Current_location==None):}}
        <td><button id="{{=i.id}}" value="{{=i.id}}" class="btn btn-danger btn-lg" data-toggle="modal" data-target="#myModal" onclick="get_id(this.value)">Cancel</button></td>
        {{else:}}
        <td><a href="{{=URL(st)}}"><button type="button" class="btn btn-danger">Track</button></a></td>
       {{pass}}
	</tr>
    {{pass}}
	{{pass}}
    </tbody>
</table>
</div>
        <br /><br /><br /><br />
        <!-- Footer -->
    <div id="footer">
        <p class="right">&copy; 2013 - &nbsp; Design by <a href="http://web.iiit.ac.in/~saurabh.kathpalia" target="_blank" title="IIIT Hyderabad">Saurabh Kathpalia</a></p>
        <a href="#">Contact</a></p>
        <div class="cl">&nbsp;</div>
    </div>
    <!-- END Footer -->
    <br />
    </div>













<!-- Button trigger modal -->
<!--button class="btn btn-danger btn-lg" data-toggle="modal" data-target="#myModal">
  Cancel
</button-->

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Cancel Consignment</h4>
      </div>
      <div class="modal-body">
        Are you sure you want to cancel this consignment?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
          <a id="redirect_button" href="http://google.com"><button  type="button" class="btn btn-primary">Yes</button></a>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
